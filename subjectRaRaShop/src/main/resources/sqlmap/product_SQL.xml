<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="product">
	
	<select id="findAll" resultType="hashMap">
		SELECT *
		  FROM PRODUCT
	</select>
	
	<select id="findOne" resultType="hashMap" parameterType="String">
		SELECT *
		  FROM PRODUCT
		 WHERE P_ID = #{id}
	</select>
	
	<insert id="save" parameterType="hashMap">
		insert into product (
			P_ID,
			P_NAME,
			P_UNITPRICE,
			P_DESCRIPTION,
			P_CATEGORY,
			P_MANUFACTURER,
			P_UNITSINSTOCK,
			P_CONDITION,
			P_FILENAME
		) values(
			#{productId},
			#{name},
			#{unitPrice},
			#{description},
			#{category},
			#{manufacturer},
			#{unitsInStock},
			#{condition},
			#{filename}
		)
	</insert>
	
	<update id="update" parameterType="hashMap">
	   UPDATE PRODUCT
		   SET P_NAME = #{name},
			   P_UNITPRICE = #{unitPrice},
			   P_DESCRIPTION = #{description},
			   P_CATEGORY = #{category},
			   P_MANUFACTURER = #{manufacturer},
			   P_UNITSINSTOCK = #{unitsInStock},
			   P_CONDITION = #{condition}
			   <if test="filename != null">
			   ,P_FILENAME = #{filename}
			   </if>
		 WHERE P_ID = #{productId}
	</update>
	
	<delete id="delete" parameterType="String">
		DELETE FROM PRODUCT
		 WHERE P_ID = #{id}
	</delete>
</mapper>